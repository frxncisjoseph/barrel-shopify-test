(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.conform = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _nanoajax=require("nanoajax"),_nanoajax2=_interopRequireDefault(_nanoajax),_microJsonp=require("micro-jsonp"),_microJsonp2=_interopRequireDefault(_microJsonp),_loop=require("loop.js"),_loop2=_interopRequireDefault(_loop),merge=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){return Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e},toQueryString=function(e){for(var t="",n=Object.keys(e),r=0;r<n.length;r++){var o=e[n[r]];t+=encodeURIComponent(o.name)+"="+encodeURIComponent(o.value||"")+(r<n.length-1?"&":"")}return t},isValid=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=e[t[n]];if(!r.valid)return!1}return!0},getFormFields=function(e){var t=[].slice.call(e.querySelectorAll("[name]"))||!1;if(t)return t.map(function(e){return{name:e.getAttribute("name"),value:e.value||void 0,valid:!0,node:e}})},runValidation=function(e,t){return t.forEach(function(t){var n=e.filter(function(e){return t.name instanceof RegExp?t.name.test(e.name):t.name===e.name})[0];n&&(t.validate(n)?(t.success&&t.success(n),n.valid=!0):(t.error&&t.error(n),n.valid=!1))})},scrubAction=function(e,t){var n=!!e.match(/\?/);return""+e+(n?"&":"?")+toQueryString(t)};exports.default=function(e){function t(){(0,_microJsonp2.default)(scrubAction(a.action,i),{param:a.jsonp,response:function(e,t){var n={fields:i,res:e?e:t,req:null};e?a.emit("error",n):a.emit("success",n)}})}function n(){return _nanoajax2.default.ajax({url:a.action,body:toQueryString(i),method:a.method},function(e,t,n){var r=e>=200&&e<=300,o={fields:i,res:t,req:n};r?a.emit("success",o):a.emit("error",o)})}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e.getAttribute("action")?e:e.getElementsByTagName("form")[0],i=getFormFields(o),a=Object.create((0,_loop2.default)({getFields:function(){return i}}));return merge(a,{method:"POST",tests:[],action:o.getAttribute("action"),jsonp:!1},r),o.onsubmit=function(e){e.preventDefault(),a.emit("submit"),i=getFormFields(o),runValidation(i,a.tests),isValid(i)&&(a.jsonp?t():n())},a};
},{"loop.js":2,"micro-jsonp":3,"nanoajax":4}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};exports.default=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={},n=function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];n&&(t[e]=t[e]||{queue:[]},t[e].queue.push(n))},r=function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=!!t[e]&&t[e].queue;r&&r.forEach(function(e){return e(n)})};return _extends({},e,{emit:r,on:n})};
},{}],3:[function(require,module,exports){
(function (global){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.microJsonp=e()}}(function(){return function e(n,o,t){function r(i,f){if(!o[i]){if(!n[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=o[i]={exports:{}};n[i][0].call(l.exports,function(e){var o=n[i][1][e];return r(o?o:e)},l,l.exports,e,n,o,t)}return o[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,o){Object.defineProperty(o,"__esModule",{value:!0});var t=0;o.default=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o="__c"+t++,r=n.param||"callback",u=r+"="+o,i=n.timeout||6e4,f=n.response?n.response:function(e,n){return console.log(e,n)},c=document.createElement("script"),d=function(){return window[o]?p():null},l=i?setTimeout(function(){p(),f(new Error("Timeout"))},i):null,p=function(){document.head.removeChild(c),window[o]=function(){},l&&clearTimeout(l)};return window[o]=function(e){f(null,e),p()},c.src=e+"&"+u,document.head.appendChild(c),d}},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(require,module,exports){
(function (global){
function getRequest(e){return e&&global.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent)?new XDomainRequest:global.XMLHttpRequest?new XMLHttpRequest:void 0}function setDefault(e,t,o){e[t]=e[t]||o}var reqfields=["responseType","withCredentials","timeout","onprogress"];exports.ajax=function(e,t){function o(e,o){return function(){a||(t(void 0===u.status?e:u.status,0===u.status?"Error":u.response||u.responseText||o,u),a=!0)}}var r=e.headers||{},n=e.body,s=e.method||(n?"POST":"GET"),a=!1,u=getRequest(e.cors);u.open(s,e.url,!0);var l=u.onload=o(200);u.onreadystatechange=function(){4===u.readyState&&l()},u.onerror=o(null,"Error"),u.ontimeout=o(null,"Timeout"),u.onabort=o(null,"Abort"),n&&(setDefault(r,"X-Requested-With","XMLHttpRequest"),global.FormData&&n instanceof global.FormData||setDefault(r,"Content-Type","application/x-www-form-urlencoded"));for(var i,d=0,f=reqfields.length;d<f;d++)i=reqfields[d],void 0!==e[i]&&(u[i]=e[i]);for(var i in r)u.setRequestHeader(i,r[i]);return u.send(n),u};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1])(1)
});